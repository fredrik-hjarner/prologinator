#!/usr/bin/env bun

export {}
const input = await Bun.stdin.text();

const prettify = (text: string): string => {
  let indent = 0;

  return text.split(/({|})/).reduce((acc, part) => {
    // Trim whitespace to clean up raw input
    const content = part.trim();
    if (!content) return acc;

    if (content === '{') {
      // --- Handle Opening Brace ---
      // If previous line didn't end with newline, add one
      const prefix = (acc && !acc.endsWith('\n')) ? "\n" : "";
      
      const currentIndent = "   ".repeat(indent);
      indent++; // Increase depth for next content
      
      return `${acc}${prefix}${currentIndent}{\n`;

    } else if (content === '}') {
      // --- Handle Closing Brace ---
      indent = Math.max(0, indent - 1);
      const currentIndent = "   ".repeat(indent);
      
      // Ensure we drop to a new line before closing
      const prefix = (acc && !acc.endsWith('\n')) ? "\n" : "";

      return `${acc}${prefix}${currentIndent}}`;

    } else {
      // --- Handle Text Content ---
      // 1. Calculate current indent string
      const indentStr = "   ".repeat(indent);
      
      // 2. Split the text into lines, trim each, and apply indent to ALL of them
      const indentedBlock = content
        .split('\n')
        .map(line => `${indentStr}${line.trim()}`) 
        .join('\n');

      // 3. Add newline if previous block didn't end with one (e.g. after a '}')
      const prefix = (acc && !acc.endsWith('\n')) ? "\n" : "";

      return `${acc}${prefix}${indentedBlock}`;
    }
  }, "");
};

console.log(prettify(input));